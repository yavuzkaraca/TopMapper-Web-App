<div class="wrapper">
  <h2>Configuration Settings</h2>
  <div class="settings">
    <div class="basic-settings">
      <div class="type-substrate-container">
        <div class="simulation-type">
          <label for="configType">Select Config Type</label>
          <select class="form-control mb-3" id="configType" [(ngModel)]="selectedConfigType" name="configType"
                  (ngModelChange)="onConfigTypeChange()">
            <option *ngFor="let type of configTypes" [value]="type.id">{{ type.name }}</option>
          </select>
        </div>
        <div class="substrate-btn">
          <button id="substrate-btn" mat-button (click)="openSubstrateDialog()">Configure Substrate</button>
        </div>
      </div>

      <form [formGroup]="basicSettingsForm">
        <!-- Input for Growth Cone Count -->
        <div class="form-group form-group-basic">
          <label for="gc_count">Growth Cone Count</label>
          <input type="number" class="form-control" id="gc_count" formControlName="gc_count"
                 placeholder="Enter Growth Cone Count">
        </div>

        <!-- Input for Growth Cone Size -->
        <div class="form-group form-group-basic">
          <label for="gc_size">Growth Cone Radius</label>
          <input type="number" class="form-control" id="gc_size" formControlName="gc_size"
                 placeholder="Enter Growth Cone Radius">
        </div>

        <!-- Input for Step Size -->
        <div class="form-group form-group-basic">
          <label for="step_size">Step Size</label>
          <input type="number" class="form-control" id="step_size" formControlName="step_size"
                 placeholder="Enter Step Size">
        </div>

        <!-- Input for Step Number -->
        <div class="form-group form-group-basic">
          <label for="step_num">Step Number</label>
          <input type="number" class="form-control" id="step_num" formControlName="step_num"
                 placeholder="Enter Step Number">
        </div>
      </form>
    </div>

    <div class="advanced-btn">
      <button id="advanced-btn" (click)="onAdvancedClick()">Advanced</button>
    </div>

    <div class="advanced-settings" [hidden]="!showAdvancedSettings">

      <!--
      <div class="gc-settings">
        <label class="settings-header">Growth Cone</label>

        <form  [formGroup]="gcForm">

          <div class="form-group">
            <label for="x_step_possibility">Ligand Min:</label>
            <input type="number" id="test1" class="form-control" formControlName="x_step_possibility" placeholder="Enter X Step Bias">
          </div>

          <div class="form-group">
            <label for="x_step_possibility">Ligand Max:</label>
            <input type="number" id="test2" class="form-control" formControlName="x_step_possibility" placeholder="Enter X Step Bias">
          </div>

          <div class="form-group">
            <label for="x_step_possibility">Ligand Steepness:</label>
            <input type="number" id="test3" class="form-control" formControlName="x_step_possibility" placeholder="Enter X Step Bias">
          </div>

          <div class="form-group">
            <label for="x_step_possibility">Receptor Min:</label>
            <input type="number" id="test4" class="form-control" formControlName="x_step_possibility" placeholder="Enter X Step Bias">
          </div>

          <div class="form-group">
            <label for="x_step_possibility">Receptor Max:</label>
            <input type="number" id="test5" class="form-control" formControlName="x_step_possibility" placeholder="Enter X Step Bias">
          </div>

          <div class="form-group">
            <label for="x_step_possibility">Receptor Steepness:</label>
            <input type="number" id="test6" class="form-control" formControlName="x_step_possibility" placeholder="Enter X Step Bias">
          </div>
        </form>

      </div>
      -->

      <div class="step-settings">
        <label class="settings-header">Step Decision</label>

        <form [formGroup]="stepDecisionForm">
          <!-- X Step Possibility Input -->
          <div class="form-group">
            <label for="x_step_possibility">
              <span>X Step Bias</span>
              <span class="tooltip-icon"
                    appTooltip="Introduces a directional preference along the X-axis, 0.5 correspons to neutral">?</span>
            </label>
            <input type="number" id="x_step_possibility" class="form-control" formControlName="x_step_possibility"
                   placeholder="Enter X Step Bias">
          </div>

          <!-- Y Step Possibility Input -->
          <div class="form-group">
            <label for="y_step_possibility">
              <span>Y Step Bias</span>
              <span class="tooltip-icon"
                    appTooltip="Introduces a directional preference along the Y-axis, 0.5 correspons to neutral">?</span>
            </label>
            <input type="number" id="y_step_possibility" class="form-control" formControlName="y_step_possibility"
                   placeholder="Enter Y Step Bias">
          </div>

          <!-- Sigma Input -->
          <div [hidden]="stepDecisionForm.get('force')?.value" class="form-group">
            <label for="sigma">
              <span>Standard Deviation</span>
              <span class="tooltip-icon"
                    appTooltip="Controls the determinism of step decisions, with lower values leading to steeper gaussian curve">?</span>
            </label>
            <input type="number" id="sigma" class="form-control" formControlName="sigma"
                   placeholder="Enter Standard Deviation">
          </div>

          <!-- Force Checkbox -->
          <div class="form-group form-check force-checkbox">
            <input type="checkbox" id="force" class="form-check-input" formControlName="force">
            <label class="form-check-label" for="force">
              <span>Accept All Steps</span>
              <span class="tooltip-icon"
                    appTooltip="Compels growth cones to accept all step proposals without guidance potential calculation">?</span>

            </label>
          </div>
        </form>


      </div>


      <div class="adaptation-interaction-container">

        <div class="interaction-settings">
          <label class="settings-header">Potential Calculation</label>


          <form [formGroup]="switchesForm">

            <div class="interaction-switches">

              <!-- Forward Signal Checkbox -->
              <div class="form-group form-check">
                <input type="checkbox" id="forward_sig" class="form-check-input" formControlName="forward_sig">
                <label class="form-check-label" for="forward_sig">Forward Signal</label>
              </div>

              <!-- Reverse Signal Checkbox -->
              <div class="form-group form-check">
                <input type="checkbox" id="reverse_sig" class="form-check-input" formControlName="reverse_sig">
                <label class="form-check-label" for="reverse_sig">Reverse Signal</label>
              </div>


              <!-- FT Interaction Checkbox -->
              <div class="form-group form-check">
                <input type="checkbox" id="ft_inter" class="form-check-input" formControlName="ft_inter">
                <label class="form-check-label" for="ft_inter">Fiber-Target Interaction</label>
              </div>

              <!-- FF Interaction Checkbox -->
              <div class="form-group form-check">
                <input type="checkbox" id="ff_inter" class="form-check-input" formControlName="ff_inter">
                <label class="form-check-label" for="ff_inter">Fiber-Fiber Interaction</label>
              </div>


              <!-- Show Sigmoid inputs only if FF Interaction is checked -->
              <div [hidden]="!switchesForm.get('ff_inter')?.value" class="ff-settings">

                <div class="ff-settings">
                  <!-- Sigmoid Steepness Input -->
                  <div class="form-group">
                    <label for="sigmoid_steepness">
                      <span>FF-Interaction Ramp-Up</span>
                      <span class="tooltip-icon"
                            appTooltip="Controls how quickly fiber-fiber interaction effects intensify at the start">?</span>
                    </label>
                    <input type="number" id="sigmoid_steepness" class="form-control" formControlName="sigmoid_steepness"
                           placeholder="Enter FF-Interaction Ramp-Up">
                  </div>

                  <!-- Sigmoid Shift Input -->
                  <div class="form-group">
                    <label for="sigmoid_shift">
                      <span>FF-Interaction Delay</span>
                      <span class="tooltip-icon"
                            appTooltip="Sets a delay before fiber-fiber interactions take effect in the simulation">?</span>
                    </label>

                    <input type="number" id="sigmoid_shift" class="form-control" formControlName="sigmoid_shift"
                           placeholder="Enter FF-Interaction Delay">
                  </div>

                  <!-- Sigmoid Height Input -->
                  <div class="form-group">
                    <label for="sigmoid_height">
                      <span>FF-Interaction Maximum</span>
                      <span class="tooltip-icon"
                            appTooltip="Defines the peak influence of fiber-fiber interactions">?</span>

                    </label>
                    <input type="number" id="sigmoid_height" class="form-control" formControlName="sigmoid_height"
                           placeholder="Enter FF-Interaction Maximum">
                  </div>
                </div>
              </div>
            </div>
          </form>
        </div>

        <div class="adaptation-settings">

          <form [formGroup]="adaptationForm">
            <!-- Adaptation Enabled Checkbox -->
            <div class="settings-header">
              <div class="form-group form-check adaptation-checkbox">
                <input type="checkbox" id="adaptation_enabled" class="form-check-input"
                       formControlName="adaptation_enabled">
                <label class="form-check-label" for="adaptation_enabled">Adaptation</label>
              </div>
            </div>

            <div *ngIf="adaptationForm.get('adaptation_enabled')?.value">
              <!-- Adaptation Mu Input -->
              <div class="form-group">
                <label for="adaptation_mu">
                  <span>Adaptation Coefficient</span>
                  <span class="tooltip-icon"
                        appTooltip="Adjusts how quickly growth cones adapt to higher potential environments">?</span>

                </label>
                <input type="number" id="adaptation_mu" class="form-control" formControlName="adaptation_mu"
                       placeholder="Enter Adaptation Coefficient">
              </div>

              <!-- Adaptation Lambda Input -->
              <div class="form-group">
                <label for="adaptation_lambda">
                  <span>Resetting Force</span>
                  <span class="tooltip-icon"
                        appTooltip="Adjusts how quickly growth cones come back to their original molecular signature">?</span>
                </label>
                <input type="number" id="adaptation_lambda" class="form-control" formControlName="adaptation_lambda"
                       placeholder="Enter Resetting Force">
              </div>

              <!-- Adaptation History Input -->
              <div class="form-group">
                <label for="adaptation_history">
                  <span>History Length</span>
                  <span class="tooltip-icon"
                        appTooltip="Determines the number of past steps considered in the simulation’s adaptive calculations">?</span>
                </label>
                <input type="number" id="adaptation_history" class="form-control" formControlName="adaptation_history"
                       placeholder="Enter Adaptation History">
              </div>
            </div>
          </form>
        </div>

      </div>
    </div>
  </div>

  <div class="start-btn">
    <button id="start-btn" [routerLink]="['/results']" (click)="startSimulation()">Start</button>
  </div>

</div>
